<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>portfolio</title>
    <link rel="shortcut icon" href="../images/main/star_.svg" type="image/x-icon" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&family=Roboto+Slab:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link rel="stylesheet" href="../css/reset.css" />
    <link rel="stylesheet" href="../css/common.css" />
    <link rel="stylesheet" href="../css/splitting.css" />
    <link rel="stylesheet" href="../css/fullpage.css" />
    <link rel="stylesheet" href="../css/layout03.css" />
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script src="../js/greensock/gsap.min.js"></script>
    <script src="../js/greensock/ScrollTrigger.min.js"></script>
    <script src="../js/greensock/CSSRulePlugin.min.js"></script>
    <script src="../js/js.cookie.min.js"></script>
    <script src="../js/splitting.min.js"></script>
    <script src="../js/lodash.js"></script>
  </head>
  <body>
    <div class="testBox">
      <ul class="test">
        <li>
          <svg class="real">
            <circle cx="150" cy="150" r="140"></circle>
          </svg>
          <svg class="bg">
            <circle cx="150" cy="150" r="140"></circle>
          </svg>
          <span class="num">0</span>
        </li>
        <li>
          <svg class="real">
            <circle cx="150" cy="150" r="140"></circle>
          </svg>
          <svg class="bg">
            <circle cx="150" cy="150" r="140"></circle>
          </svg>
          <span class="num">0</span>
        </li>
        <li>
          <svg class="real">
            <circle cx="150" cy="150" r="140"></circle>
          </svg>
          <svg class="bg">
            <circle cx="150" cy="150" r="140"></circle>
          </svg>

          <span class="num">0</span>
        </li>
      </ul>
    </div>
    <script>
      //const circle = document.querySelector(".test li:nth-child(1) circle");
      //console.log($(".test li:nth-child(1) circle"));
      const test = {
        aa: 100,
        bb: 75,
        cc: 50,
      };

      const circle = $(".test li:nth-child(1) circle")[0];
      const circleTotal = circle.getTotalLength();
      //console.log(circle.getTotalLength()); // strpke-daharray 값을 출력할때
      // circle.getTotalLength() 는 dom 에 적용하는 메서드이다. jQuery로는 접근이 불가능 하다.
      // 만약 꼮 쓰고 싶으면 $("선택자")[0] 으로 쓰면 된다.
      gsap.set(".test li .real", {
        strokeDasharray: circleTotal,
        strokeDashoffset: circleTotal,
      });
      // gsap.to(".test li:nth-child(1) circle", {
      //   strokeDashoffset: ((100 - test.aa) / 100) * circleTotal,
      //   duration: 2,
      //   ease: "bounce",
      // });
      // gsap.to(".test li:nth-child(2) circle", {
      //   strokeDashoffset: ((100 - test.bb) / 100) * circleTotal,
      //   duration: 2,
      //   ease: "bounce",
      // });
      // gsap.to(".test li:nth-child(3) circle", {
      //   strokeDashoffset: ((100 - test.cc) / 100) * circleTotal,
      //   duration: 2,
      //   ease: "bounce",
      // });

      // gsap.from(test, {
      //   aa: 0,
      //   bb: 0,
      //   cc: 0,
      //   duration: 2,
      //   onUpdate: function () {
      //     $(".test li:nth-child(1) .num").text(test.aa.toFixed(2));
      //     $(".test li:nth-child(2) .num").text(test.bb.toFixed(2));
      //     $(".test li:nth-child(3) .num").text(test.cc.toFixed(2));
      //   },
      // });
      const testTL = gsap.timeline({
        scrollTrigger: {
          trigger: ".testBox",
          markers: true,
          start: "top top",
          end: "bottom top",
          scrub: 1,
          pin: true,
        },
      });
      testTL
        .to(
          ".test li:nth-child(1) .real",
          {
            strokeDashoffset: ((100 - test.aa) / 100) * circleTotal,
            duration: 2,
          },
          0
        )
        .to(
          ".test li:nth-child(2) .real",
          {
            strokeDashoffset: ((100 - test.bb) / 100) * circleTotal,
            duration: 2,
          },
          0
        )
        .to(
          ".test li:nth-child(3) .real",
          {
            strokeDashoffset: ((100 - test.cc) / 100) * circleTotal,
            duration: 2,
          },
          0
        )
        .from(
          test,
          {
            aa: 0,
            bb: 0,
            cc: 0,
            duration: 2,
            onUpdate: function () {
              $(".test li:nth-child(1) .num").text(test.aa.toFixed(2));
              $(".test li:nth-child(2) .num").text(test.bb.toFixed(2));
              $(".test li:nth-child(3) .num").text(test.cc.toFixed(2));
            },
          },
          0
        );
    </script>
  </body>
</html>
